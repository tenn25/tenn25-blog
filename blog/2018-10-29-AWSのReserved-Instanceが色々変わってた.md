---
date: 2018-10-29T23:30:02.420Z
title: AWSのReserved Instanceが色々変わってた
category: others
tags:
  - Others
banner: ''
---

### AWS Reserved Instance

- 要は前払いすることで、トータルで割安になるよ、というやつ。
- 権利を買うだけなので、インスタンスとの紐づけは不要

#### コストチューニングの方向性

- クラウドネイティブなアーキに変える(PaaS、サーバレス)⇒ 影響大 大変
- クラウドネイティブなアーキに変える(ECS、スポットインスタンス)⇒ 効果大 大変
- 割引オプション ⇒ 効果中　簡単
- その他(EBS など)⇒ 効果小　簡単

#### 基本の考え方

- 常時稼働分は固定で RI を買ってしまう
- ピーク時に増減する分はオンデマンドで増やしたり減らしたり

#### ここ１年くらいの機能アップデート

##### RI の柔軟性があがった

- サイズの柔軟性
  EC2,RDS に対して適用されてる。  
  m4.2xlearge1 台分購入 ⇒m4learge×4 台。  
  同じファミリーないのサイズ変更なら既存の RI が無駄にならない

- AZ の柔軟性  
  リージョン指定は必要だが、AZ は固定ではない。

##### Convertible RI

- 後からインスタンスタイプのファミリーも変更が可能
- m4→m5 に移行など、単価が下がるような変更の場合は購入数を増やして支払い額が減らないようにしないといけない
- 支払う料金の増える分だけ払えば変更が可能
- 割引率は普通の RI と比べて若干(10%くらい)下がる

##### ElastiCache に RI が出た

- EC2 と RDS くらいだったが、今後も増えるかも

##### 支払い方法

- 全額前払い 効果大
- 一部前払い 効果中
- 前払い無し 効果小

この 3 種類だが、「全額前払いコースをリースで支払う」は可能らしい。

#### AWS コンソール上から RI の状況を確認方法

コストエクスプローラから以下の２つを見る。

- カバレッジレポート
  RI の一覧を見る機能。  
  サービスごとの割合が見れる。  
  View Recommendations からおすすめの RI の買い方を教えてくれる。

- Utirization
  所有してる RI を何％使ってるかが見れる。

#### ちなみに Azure は？

あるっぽい  
[Azure Reserved VM Instances (RIs)](https://azure.microsoft.com/ja-jp/pricing/reserved-vm-instances/)
